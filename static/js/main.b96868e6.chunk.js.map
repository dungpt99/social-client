{"version":3,"sources":["context/AuthReducer.js","context/AuthContext.js","components/topbar/Topbar.jsx","components/post/Post.jsx","components/share/Share.jsx","components/feed/Feed.jsx","components/rightBar/RightBar.jsx","components/sideBar/SideBar.jsx","pages/home/Home.jsx","apiCalls.js","pages/login/Login.jsx","pages/profile/Profile.jsx","pages/register/Register.jsx","components/chatOnline/ChatOnline.jsx","components/conversation/Conversation.jsx","components/message/Message.jsx","pages/messenger/messenger.jsx","App.js","index.js"],"names":["AuthReducer","state","action","type","user","isFetching","error","payload","INITIAL_STATE","AuthContext","createContext","AuthContextProvider","children","useReducer","dispatch","Provider","value","Topbar","useContext","useState","handleChange","a","className","to","Search","placeholder","onChange","id","src","avatar","PF","alt","name","style","color","Message","Notifications","Post","post","setUser","isLiked","setIsLiked","like","setLike","currentUser","process","useEffect","axios","get","res","data","fetchData","length","likeHandler","postId","console","log","delete","handleDelete","format","createdAt","MoreVert","onClick","desc","img","Share","changeStatus","useRef","file","setFile","submitHandler","e","preventDefault","newPost","current","FormData","append","ref","URL","createObjectURL","Cancel","onSubmit","htmlFor","PermMedia","htmlColor","display","accept","target","files","Label","Room","EmojiEmotions","Feed","userId","posts","setPosts","status","setStatus","sort","p1","p2","Date","undefined","setTimeout","map","p","RightBar","friends","setFriends","friendList","getFriends","friend","SideBar","width","RssFeed","Home","loginCall","userCredential","localStorage","setItem","accessToken","refreshToken","interceptors","request","use","config","headers","authorization","Promise","reject","Login","email","password","handleClick","disabled","Profile","useParams","followed","setFollowed","forEach","Number","fetchFriend","fetchUser","follow","coverImage","Remove","Add","Register","passwordAgain","history","useHistory","setCustomValidity","push","required","ChatOnline","setCurrentChat","friendOnline","setFriendOnline","getUser","getConversation","Conversation","conversation","users","find","m","message","own","content","Messenger","conversations","setConversations","currentChat","messages","setMessages","newMessage","setNewMessage","arrivalMessage","setArrivalMessage","onlineUser","setOnlineUser","io","socket","scrollRef","on","senderId","prev","emit","getMessage","handleSubmit","receiverId","newContent","scrollIntoView","behavior","c","o","App","getItem","exact","path","CircularProgress","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b96868e6.chunk.js","sourcesContent":["const AuthReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"LOGIN_START\":\r\n      return {\r\n        user: null,\r\n        isFetching: true,\r\n        error: false,\r\n      };\r\n    case \"LOGIN_SUCCESS\":\r\n      return {\r\n        user: action.payload,\r\n        isFetching: false,\r\n        error: false,\r\n      };\r\n    case \"LOGIN_FAILURE\":\r\n      return {\r\n        user: null,\r\n        isFetching: false,\r\n        error: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default AuthReducer;\r\n","import { createContext, useReducer } from \"react\";\r\nimport AuthReducer from \"./AuthReducer\";\r\n\r\nconst INITIAL_STATE = {\r\n  user: null,\r\n  isFetching: false,\r\n  error: false,\r\n};\r\n\r\nexport const AuthContext = createContext(INITIAL_STATE);\r\n\r\nexport const AuthContextProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(AuthReducer, INITIAL_STATE);\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        user: state.user,\r\n        isFetching: state.isFetching,\r\n        error: state.error,\r\n        dispatch,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { Search, Notifications, Message } from \"@mui/icons-material\";\r\nimport \"./topbar.css\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport axios from \"axios\";\r\n\r\nexport default function Topbar() {\r\n  const { user } = useContext(AuthContext);\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n  const [text, setText] = useState();\r\n\r\n  const handleChange = async () => {};\r\n\r\n  return (\r\n    <div className=\"topBar\">\r\n      <div className=\"topBar__left\">\r\n        <Link to=\"/\">\r\n          <div className=\"topBar__left-logo\">Social</div>\r\n        </Link>\r\n      </div>\r\n      <div className=\"topBar__center\">\r\n        <div className=\"topBar__center-searchBar\">\r\n          <Search className=\"topBar__center-searchIcon\" />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search for friend, post or video\"\r\n            className=\"topBar__center-searchInput\"\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div className=\"topBar__right\">\r\n        <Link to={\"/profile/\" + user.id}>\r\n          <div className=\"topBar__right-user\">\r\n            <div className=\"user__img\">\r\n              <img\r\n                src={user.avatar || PF + \"/assets/person/noavatar.png\"}\r\n                className=\"user__img-config\"\r\n                alt=\"\"\r\n              />\r\n            </div>\r\n            <div className=\"user__name\">{user.name}</div>\r\n          </div>\r\n        </Link>\r\n\r\n        <div className=\"topBar__right-icon\">\r\n          <Link to=\"/messenger\" style={{ color: \"#fff\" }}>\r\n            <div className=\"topBar__right-iconItem\">\r\n              <Message />\r\n              <span className=\"topBarIconBadge\">1</span>\r\n            </div>\r\n          </Link>\r\n          <div className=\"topBar__right-iconItem\">\r\n            <Notifications />\r\n            <span className=\"topBarIconBadge\">1</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { MoreVert } from \"@mui/icons-material\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { format } from \"timeago.js\";\r\nimport \"./post.css\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\n\r\nexport default function Post({ post }) {\r\n  const [user, setUser] = useState({});\r\n  const [isLiked, setIsLiked] = useState(false);\r\n  const [like, setLike] = useState(1);\r\n  const { user: currentUser } = useContext(AuthContext);\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const res = await axios.get(`${PF}/user/${post.user.id}`);\r\n      setUser(res.data);\r\n    }\r\n    fetchData();\r\n  }, [post.user.id]);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const res = await axios.get(`${PF}/like/${post.id}`);\r\n      setLike(res.data.length);\r\n    }\r\n    fetchData();\r\n  }, [post.id]);\r\n\r\n  const likeHandler = async () => {\r\n    if (!isLiked) {\r\n      try {\r\n        const data = {\r\n          postId: post.id,\r\n        };\r\n        await axios.post(`${PF}/like`, data);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    } else {\r\n      try {\r\n        const data = {\r\n          postId: post.id,\r\n        };\r\n        await axios.delete(`${PF}/like`, { data });\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n    setLike(isLiked ? like - 1 : like + 1);\r\n    setIsLiked(!isLiked);\r\n  };\r\n\r\n  const handleDelete = async () => {};\r\n\r\n  return (\r\n    <div className=\"post\">\r\n      <div className=\"postWrapper\">\r\n        <div className=\"postWrapper__top\">\r\n          <div className=\"postWrapper__topLeft\">\r\n            <Link to={\"/profile/\" + user.id}>\r\n              <img\r\n                className=\"postWrapper__topLeft-userImg\"\r\n                alt=\"\"\r\n                src={user.avatar || PF + \"/assets/person/noavatar.png\"}\r\n              />\r\n            </Link>\r\n            <div>\r\n              <Link to={\"/profile/\" + user.id}>\r\n                <div className=\"postWrapper__topLeft-username\">{user.name}</div>\r\n              </Link>\r\n\r\n              <div className=\"postWrapper__topLeft-time\">\r\n                {format(post.createdAt)}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"postWrapper__topRight\">\r\n            {user.id === currentUser.id && <MoreVert onClick={handleDelete} />}\r\n          </div>\r\n        </div>\r\n        <div className=\"postWrapper__center\">\r\n          <div className=\"postWrapper__center-text\">{post.desc}</div>\r\n          <img\r\n            src={PF + post.img || \"\"}\r\n            alt=\"\"\r\n            className=\"postWrapper__center-img\"\r\n          />\r\n        </div>\r\n        <div className=\"postWrapper__bottom\">\r\n          <div className=\"postWrapper__bottom-left\">\r\n            <img src=\"/assets/post/heart.png\" alt=\"\" onClick={likeHandler} />\r\n            <span className=\"left__likeCounter\">{like} people liked it</span>\r\n          </div>\r\n          <div className=\"postWrapper__bottom-right\">10 comments</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import {\r\n  Cancel,\r\n  EmojiEmotions,\r\n  Label,\r\n  PermMedia,\r\n  Room,\r\n} from \"@mui/icons-material\";\r\nimport axios from \"axios\";\r\nimport { useContext, useEffect, useRef, useState } from \"react\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport \"./share.css\";\r\n\r\nexport default function Share({ changeStatus }) {\r\n  const { user } = useContext(AuthContext);\r\n  const desc = useRef();\r\n  const [file, setFile] = useState(null);\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n\r\n  const submitHandler = async (e) => {\r\n    e.preventDefault();\r\n    const newPost = {\r\n      desc: desc.current.value,\r\n    };\r\n    if (file) {\r\n      const data = new FormData();\r\n      data.append(\"file\", file);\r\n      data.append(\"desc\", desc.current.value);\r\n      try {\r\n        await axios.post(`${PF}/post/uploads`, data);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    } else {\r\n      try {\r\n        await axios.post(`${PF}/post`, newPost);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n    desc.current.value = null;\r\n    setFile(null);\r\n    changeStatus(true);\r\n  };\r\n  return (\r\n    <div className=\"share\">\r\n      <div className=\"share__top\">\r\n        <div className=\"share__top-img\">\r\n          <img src={user.avatar || PF + \"/assets/person/noavatar.png\"} alt=\"\" />\r\n        </div>\r\n        <input\r\n          type=\"text\"\r\n          className=\"share__top-text\"\r\n          placeholder=\"What are you thinking?\"\r\n          ref={desc}\r\n        />\r\n      </div>\r\n      <hr />\r\n      {file && (\r\n        <div className=\"shareImgContainer\">\r\n          <img src=\"shareImg\" src={URL.createObjectURL(file)} alt=\"\" />\r\n          <Cancel className=\"shareCancelImg\" onClick={() => setFile(null)} />\r\n        </div>\r\n      )}\r\n      <form className=\"share__bottom\" onSubmit={submitHandler}>\r\n        <div className=\"share__bottom-options\">\r\n          <label htmlFor=\"file\" className=\"share__bottom-option\">\r\n            <PermMedia className=\"option__icon\" htmlColor=\"tomato\" />\r\n            <span className=\"option__name\">Photo or video</span>\r\n            <input\r\n              style={{ display: \"none\" }}\r\n              type=\"file\"\r\n              id=\"file\"\r\n              accept=\".png,.jpeg,.jpg\"\r\n              onChange={(e) => setFile(e.target.files[0])}\r\n            />\r\n          </label>\r\n          <div className=\"share__bottom-option\">\r\n            <Label className=\"option__icon\" htmlColor=\"blue\" />\r\n            <span className=\"option__name\">Tag</span>\r\n          </div>\r\n          <div className=\"share__bottom-option\">\r\n            <Room className=\"option__icon\" htmlColor=\"green\" />\r\n            <span className=\"option__name\">Location</span>\r\n          </div>\r\n          <div className=\"share__bottom-option\">\r\n            <EmojiEmotions className=\"option__icon\" htmlColor=\"goldenrod\" />\r\n            <span className=\"option__name\">Feeling</span>\r\n          </div>\r\n        </div>\r\n        <div className=\"share__bottom-btn\">\r\n          <button type=\"submit\">Share</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","import { useContext, useEffect, useState } from \"react\";\r\nimport Post from \"../post/Post\";\r\nimport Share from \"../share/Share\";\r\nimport \"./feed.css\";\r\nimport axios from \"axios\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nexport default function Feed({ userId }) {\r\n  const [posts, setPosts] = useState([]);\r\n  const { user } = useContext(AuthContext);\r\n  const [status, setStatus] = useState(false);\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const res = userId\r\n        ? await axios.get(`${PF}/post/profile/` + userId)\r\n        : await axios.get(`${PF}/post/timeline`);\r\n      setPosts(\r\n        res.data.sort((p1, p2) => {\r\n          return new Date(p2.createdAt) - new Date(p1.createdAt);\r\n        })\r\n      );\r\n    }\r\n    fetchData();\r\n  }, [userId, status]);\r\n\r\n  const changeStatus = (e) => {\r\n    setStatus(e);\r\n    setTimeout(setStatus(!e), 1000);\r\n  };\r\n  return (\r\n    <div className=\"feed\">\r\n      {user.id === userId || userId === undefined ? (\r\n        <Share changeStatus={changeStatus} />\r\n      ) : null}\r\n      {posts.map((p) => (\r\n        <Post key={p.id} post={p} />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","import axios from \"axios\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useContext } from \"react\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./rightBar.css\";\r\n\r\nexport default function RightBar() {\r\n  const { user } = useContext(AuthContext);\r\n  const [friends, setFriends] = useState([]);\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n  useEffect(() => {\r\n    const getFriends = async () => {\r\n      try {\r\n        const friendList = await axios.get(`${PF}/user`);\r\n        setFriends(friendList.data);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n    getFriends();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"rightBar\">\r\n      <div className=\"rightBar__title\">People</div>\r\n      <ul className=\"rightBar__friends\">\r\n        {friends.map((friend) => (\r\n          <Link\r\n            to={\"/profile/\" + friend.id}\r\n            style={{ color: \"#333\" }}\r\n            key={friend.id}\r\n            user={friend}\r\n          >\r\n            <li className=\"rightBar__friend\">\r\n              <div className=\"rightBar__friendImg\">\r\n                <img\r\n                  src={friend.avatar || PF + \"/assets/person/noavatar.png\"}\r\n                  alt=\"\"\r\n                />\r\n                <div className=\"rightBar__friendStatus\"></div>\r\n              </div>\r\n              <span className=\"rightBar__friendName\">{friend.name}</span>\r\n            </li>\r\n          </Link>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n","import { RssFeed } from \"@mui/icons-material\";\r\nimport axios from \"axios\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport \"./sideBar.css\";\r\n\r\nexport default function SideBar() {\r\n  const { user } = useContext(AuthContext);\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n  return (\r\n    <div className=\"sideBar\">\r\n      <ul className=\"sideBar__list\">\r\n        <li className=\"sideBar__list-item\">\r\n          <Link to={\"/profile/\" + user.id} style={{ width: \"100%\" }}>\r\n            <div className=\"item__user\">\r\n              <div className=\"item__userImg\">\r\n                <img\r\n                  src={user.avatar || PF + \"/assets/person/noavatar.png\"}\r\n                  alt=\"\"\r\n                />\r\n              </div>\r\n              <div className=\"item__userName\">{user.name}</div>\r\n            </div>\r\n          </Link>\r\n        </li>\r\n        <li className=\"sideBar__list-item\">\r\n          <RssFeed className=\"item__icon\" />\r\n          <span className=\"item__nameIcon\">New feed</span>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport Topbar from \"../../components/topbar/Topbar\";\r\nimport Feed from \"../../components/feed/Feed\";\r\nimport RightBar from \"../../components/rightBar/RightBar\";\r\nimport \"./home.css\";\r\nimport SideBar from \"../../components/sideBar/SideBar\";\r\n\r\nexport default function Home() {\r\n  return (\r\n    <>\r\n      <Topbar />\r\n      <div className=\"homeContainer\">\r\n        <SideBar />\r\n        <Feed />\r\n        <RightBar />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import axios from \"axios\";\r\n\r\nexport const loginCall = async (userCredential, dispatch) => {\r\n  dispatch({ type: \"LOGIN_START\" });\r\n  try {\r\n    const res = await axios.post(\r\n      \"https://socialserver12-2021.herokuapp.com/login\",\r\n      userCredential\r\n    );\r\n    if (localStorage) {\r\n      localStorage.setItem(\"accessToken\", res.data.accessToken);\r\n      localStorage.setItem(\"refreshToken\", res.data.refreshToken);\r\n    }\r\n    axios.interceptors.request.use(\r\n      (config) => {\r\n        config.headers.authorization = `Bearer ${res.data.accessToken}`;\r\n        return config;\r\n      },\r\n      (error) => {\r\n        return Promise.reject(error);\r\n      }\r\n    );\r\n    const user = await axios.get(\r\n      \"https://socialserver12-2021.herokuapp.com/user/current\"\r\n    );\r\n    dispatch({ type: \"LOGIN_SUCCESS\", payload: user.data });\r\n  } catch (error) {\r\n    dispatch({ type: \"LOGIN_FAILURE\", payload: error });\r\n  }\r\n};\r\n","import { useContext, useEffect, useRef } from \"react\";\r\nimport \"./login.css\";\r\nimport { loginCall } from \"../../apiCalls\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport { CircularProgress } from \"@mui/material\";\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function Login() {\r\n  const email = useRef();\r\n  const password = useRef();\r\n  const { user, isFetching, error, dispatch } = useContext(AuthContext);\r\n\r\n  const handleClick = async (e) => {\r\n    e.preventDefault();\r\n    loginCall(\r\n      { email: email.current.value, password: password.current.value },\r\n      dispatch\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <div className=\"loginWrapper\">\r\n        <div className=\"loginWrapper__left\">\r\n          <div className=\"loginLogo\">Social</div>\r\n          <div className=\"loginDesc\">\r\n            Connect with friends and the world around on Social\r\n          </div>\r\n        </div>\r\n        <form className=\"loginWrapper__right\" onSubmit={handleClick}>\r\n          <div className=\"loginWrapper__right-box\">\r\n            <input\r\n              type=\"email\"\r\n              className=\"loginUsername\"\r\n              placeholder=\"Email\"\r\n              ref={email}\r\n            />\r\n            <input\r\n              type=\"password\"\r\n              className=\"loginPassword\"\r\n              placeholder=\"Password\"\r\n              ref={password}\r\n            />\r\n          </div>\r\n          <div className=\"loginWrapper__right-login\">\r\n            <button type=\"submit\" disabled={isFetching}>\r\n              Login\r\n            </button>\r\n          </div>\r\n          <div className=\"loginWrapper__right-forgot\">\r\n            <span className=\"forgotPassword\">Forgot Password?</span>\r\n          </div>\r\n          <div className=\"loginWrapper__right-create\">\r\n            <Link to=\"/register\">\r\n              <button>Create new account</button>\r\n            </Link>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useContext, useEffect, useState } from \"react\";\r\nimport Feed from \"../../components/feed/Feed\";\r\nimport Topbar from \"../../components/topbar/Topbar\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport \"./profile.css\";\r\nimport { useParams } from \"react-router\";\r\nimport axios from \"axios\";\r\nimport { Add, Remove } from \"@mui/icons-material\";\r\n\r\nexport default function Profile() {\r\n  const [user, setUser] = useState({});\r\n  const id = useParams().id;\r\n  const { user: currentUser } = useContext(AuthContext);\r\n  const [followed, setFollowed] = useState(false);\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n\r\n  useEffect(() => {\r\n    const fetchFriend = async () => {\r\n      try {\r\n        const res = await axios.get(`${PF}/friend`);\r\n        res.data.forEach((e) => {\r\n          if (e.id === Number(id)) {\r\n            setFollowed(true);\r\n          }\r\n        });\r\n        console.log(followed);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n    fetchFriend();\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      const res = await axios.get(`${PF}/user/${id}`);\r\n      setUser(res.data);\r\n    };\r\n    fetchUser();\r\n  }, [id]);\r\n\r\n  const handleClick = async () => {\r\n    if (!followed) {\r\n      try {\r\n        const res = await axios.post(`${PF}/friend`, {\r\n          follow: id,\r\n        });\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    } else {\r\n      try {\r\n        const res = await axios.delete(`${PF}/friend`, {\r\n          data: { follow: user.id },\r\n        });\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n    setFollowed(!followed);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Topbar />\r\n      <div className=\"profileWrapper\">\r\n        <div className=\"profile__user\">\r\n          <img\r\n            className=\"profile__userCoverImg\"\r\n            src={user.coverImage || \"/assets/person/cat.jpg\"}\r\n            alt=\"\"\r\n          />\r\n          <div className=\"profile__userAvt\">\r\n            <img\r\n              src={user.avatar || PF + \"/assets/person/noavatar.png\"}\r\n              alt=\"\"\r\n            />\r\n            <div className=\"profile__userName\">{user.name}</div>\r\n            {user.name !== currentUser.name && (\r\n              <button className=\"profile__userFollow\" onClick={handleClick}>\r\n                {followed ? \"Unfollow\" : \"follow\"}\r\n                {followed ? <Remove /> : <Add />}\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className=\"profile__feed\">\r\n          <Feed userId={user.id} />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import axios from \"axios\";\r\nimport { useRef } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport \"./register.css\";\r\n\r\nexport default function Register() {\r\n  const name = useRef();\r\n  const email = useRef();\r\n  const password = useRef();\r\n  const passwordAgain = useRef();\r\n  const history = useHistory();\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n  const handleClick = async (e) => {\r\n    e.preventDefault();\r\n    if (passwordAgain.current.value !== password.current.value) {\r\n      passwordAgain.current.setCustomValidity(\"Password don't match\");\r\n    } else {\r\n      const user = {\r\n        name: name.current.value,\r\n        email: email.current.value,\r\n        password: password.current.value,\r\n      };\r\n      try {\r\n        await axios.post(`${PF}/user`, user);\r\n        history.push(\"/login\");\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"register\">\r\n      <form className=\"registerWrapper\" onSubmit={handleClick}>\r\n        <input type=\"text\" placeholder=\"Name\" required ref={name} />\r\n        <input type=\"email\" placeholder=\"Email\" required ref={email} />\r\n        <input type=\"password\" placeholder=\"Password\" required ref={password} />\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Repeat password\"\r\n          required\r\n          ref={passwordAgain}\r\n        />\r\n        <div className=\"registerWrapper__btn\">\r\n          <button type=\"submit\">Sign up</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","import axios from \"axios\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport \"./chatOnline.css\";\r\n\r\nexport default function ChatOnline({ userId, setCurrentChat }) {\r\n  const [friendOnline, setFriendOnline] = useState(null);\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n\r\n  useEffect(() => {\r\n    const getUser = async () => {\r\n      try {\r\n        const res = await axios.get(`${PF}/user/` + userId);\r\n        setFriendOnline(res.data);\r\n      } catch (error) {}\r\n    };\r\n    getUser();\r\n  }, [userId]);\r\n\r\n  const handleClick = () => {\r\n    const getConversation = async () => {\r\n      const res = await axios.get(`${PF}/conversation/` + userId);\r\n      setCurrentChat(res.data);\r\n    };\r\n    getConversation();\r\n  };\r\n\r\n  return (\r\n    <div className=\"chatOnline\">\r\n      <div className=\"chatOnlineFriend\" onClick={handleClick}>\r\n        <div className=\"chatOnlineImgContainer\">\r\n          <img\r\n            src={friendOnline?.avatar || PF + \"/assets/person/noavatar.png\"}\r\n            alt=\"\"\r\n            className=\"chatOnlineImg\"\r\n          />\r\n          <div className=\"chatOnlineBadge\"></div>\r\n        </div>\r\n        <div className=\"chatOnlineName\">{friendOnline?.name}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport \"./Conversation.css\";\r\n\r\nexport default function Conversation({ conversation, currentUser }) {\r\n  const [user, setUser] = useState({});\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n  useEffect(() => {\r\n    const getUser = async () => {\r\n      try {\r\n        const res = await axios.get(\r\n          `${PF}/conversation/user/` + conversation.id\r\n        );\r\n        const friend = res.data[0].users.find((m) => m.id !== currentUser.id);\r\n        setUser(friend);\r\n      } catch (error) {}\r\n    };\r\n    getUser();\r\n  }, [conversation, currentUser]);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"conversation\">\r\n        <img\r\n          src={user.avatar || PF + \"/assets/person/noavatar.png\"}\r\n          alt=\"\"\r\n          className=\"conversationImg\"\r\n        />\r\n        <div className=\"conversationName\">{user.name}</div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport \"./Message.css\";\r\nimport { format } from \"timeago.js\";\r\n\r\nexport default function Message({ message, own }) {\r\n  const [user, setUser] = useState(null);\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n\r\n  useEffect(() => {\r\n    const getUser = async () => {\r\n      try {\r\n        const res = await axios.get(`${PF}/user/` + message.user.id);\r\n        setUser(res.data);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n    if (message) {\r\n      getUser();\r\n    }\r\n  }, [message]);\r\n\r\n  return (\r\n    <>\r\n      <div className={own ? \"message own\" : \"message\"}>\r\n        <div className=\"message__top\">\r\n          <img\r\n            src={message ? PF + \"/assets/person/noavatar.png\" : \"\"}\r\n            alt=\"\"\r\n            className=\"messageImg\"\r\n          />\r\n          <div className=\"messageText\">{message ? message.content : null}</div>\r\n        </div>\r\n        <div className=\"message__bottom\">\r\n          {message ? format(message.createdAt) : null}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import axios from \"axios\";\r\nimport { useContext, useEffect, useRef, useState } from \"react\";\r\nimport ChatOnline from \"../../components/chatOnline/ChatOnline\";\r\nimport Conversation from \"../../components/conversation/Conversation\";\r\nimport Message from \"../../components/message/Message\";\r\nimport Topbar from \"../../components/topbar/Topbar\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport \"./messenger.css\";\r\nimport { io } from \"socket.io-client\";\r\n\r\nexport default function Messenger() {\r\n  const [conversations, setConversations] = useState([]);\r\n  const [currentChat, setCurrentChat] = useState(null);\r\n  const [messages, setMessages] = useState(null);\r\n  const [newMessage, setNewMessage] = useState(\"\");\r\n  const [arrivalMessage, setArrivalMessage] = useState(null);\r\n  const [onlineUser, setOnlineUser] = useState(null);\r\n  const [socket, setSocket] = useState(\r\n    io(\"ws://socialsocketio122021.herokuapp.com\")\r\n  );\r\n\r\n  const { user } = useContext(AuthContext);\r\n  const scrollRef = useRef();\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n\r\n  useEffect(() => {\r\n    socket.on(\"getMessage\", (data) => {\r\n      setArrivalMessage({\r\n        user: { id: data.senderId },\r\n        content: data.content,\r\n      });\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    arrivalMessage && setMessages((prev) => [...prev, arrivalMessage]);\r\n  }, [arrivalMessage, currentChat]);\r\n\r\n  useEffect(() => {\r\n    socket.emit(\"addUser\", user.id);\r\n    socket.on(\"getUser\", (users) => {\r\n      setOnlineUser(users);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const getConversation = async () => {\r\n      const res = await axios.get(`${PF}/conversation`);\r\n      setConversations(res.data);\r\n      console.log(res.data);\r\n    };\r\n    getConversation();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const getMessage = async () => {\r\n      try {\r\n        const res = await axios.get(`${PF}/messages/` + currentChat.id);\r\n        setMessages(res.data);\r\n      } catch (error) {}\r\n    };\r\n    getMessage();\r\n  }, [currentChat]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const getUser = await axios.get(\r\n        `${PF}/conversation/user/` + currentChat.id\r\n      );\r\n      const friend = getUser.data[0].users.find((m) => m.id !== user.id);\r\n\r\n      socket.emit(\"sendMessage\", {\r\n        senderId: user.id,\r\n        receiverId: friend.id,\r\n        content: newMessage,\r\n      });\r\n\r\n      const newContent = {\r\n        content: newMessage,\r\n        receiverId: friend.id,\r\n      };\r\n\r\n      const res = await axios.post(`${PF}/messages`, newContent);\r\n\r\n      setMessages([...messages, res.data]);\r\n      setNewMessage(\"\");\r\n    } catch (error) {}\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [messages]);\r\n  return (\r\n    <>\r\n      <Topbar />\r\n      <div className=\"messenger\">\r\n        <div className=\"messenger__left\">\r\n          <div className=\"messengerMenuWrapper\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search for friend\"\r\n              className=\"chatMenuInput\"\r\n            />\r\n            {conversations.map((c) => (\r\n              <div onClick={() => setCurrentChat(c)} key={c.id}>\r\n                <Conversation conversation={c} currentUser={user} />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <div className=\"messenger__box\">\r\n          <div className=\"messengerBoxWrapper\">\r\n            {currentChat ? (\r\n              <>\r\n                <div className=\"chatBoxTop\">\r\n                  {messages !== null ? (\r\n                    messages.map((m) => (\r\n                      <div ref={scrollRef} key={m.id}>\r\n                        <Message message={m} own={m.user.id === user.id} />\r\n                      </div>\r\n                    ))\r\n                  ) : (\r\n                    <Message />\r\n                  )}\r\n                </div>\r\n                <div className=\"chatBoxBottom\">\r\n                  <textarea\r\n                    className=\"chatMessageInput\"\r\n                    onChange={(e) => setNewMessage(e.target.value)}\r\n                    value={newMessage}\r\n                  ></textarea>\r\n                  <button className=\"chatSubmitButton\" onClick={handleSubmit}>\r\n                    Send\r\n                  </button>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <span className=\"noConversation\">\r\n                Open conversation to start a chat\r\n              </span>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className=\"messenger__right\">\r\n          <div className=\"messengerOnlineWrapper\">\r\n            Online\r\n            {onlineUser?.map((o) =>\r\n              o.userId !== user.id ? (\r\n                <ChatOnline\r\n                  key={o.userId}\r\n                  userId={o.userId}\r\n                  setCurrentChat={setCurrentChat}\r\n                />\r\n              ) : null\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import Home from \"./pages/home/Home.jsx\";\nimport Login from \"./pages/login/Login.jsx\";\nimport Profile from \"./pages/profile/Profile.jsx\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  Redirect,\n} from \"react-router-dom\";\nimport Register from \"./pages/register/Register.jsx\";\nimport axios from \"axios\";\nimport { useContext, useEffect } from \"react\";\nimport { AuthContext } from \"./context/AuthContext.js\";\nimport { CircularProgress } from \"@mui/material\";\nimport Messenger from \"./pages/messenger/messenger.jsx\";\n\nfunction App() {\n  const { user, dispatch } = useContext(AuthContext);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const accessToken = localStorage.getItem(\"accessToken\");\n        if (accessToken) {\n          axios.interceptors.request.use(\n            (config) => {\n              config.headers.authorization = `Bearer ${accessToken}`;\n              return config;\n            },\n            (error) => {\n              return Promise.reject(error);\n            }\n          );\n        }\n        const user = await axios.get(\n          \"https://socialserver12-2021.herokuapp.com/user/current\"\n        );\n        dispatch({ type: \"LOGIN_SUCCESS\", payload: user.data });\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    fetchData();\n  }, []);\n\n  return (\n    <Router>\n      <Switch>\n        <Route exact path=\"/\">\n          {user ? <Home /> : <Login />}\n        </Route>\n        <Route exact path=\"/register\">\n          <Register />\n        </Route>\n        <Route path=\"/login\">{user ? <Redirect to=\"/\" /> : <Login />}</Route>\n        <Route path=\"/profile/:id\">\n          {user ? <Profile /> : <CircularProgress />}\n        </Route>\n        <Route path=\"/messenger\">\n          <Messenger />\n        </Route>\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\nimport { AuthContextProvider } from \"./context/AuthContext\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <AuthContextProvider>\n      <App />\n    </AuthContextProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}